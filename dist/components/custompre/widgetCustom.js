"use strict";function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function init(){var e=require("../../lib/react.js"),t=require("../../cssStr/cssStr.js"),a=(require("../../actions/projectActions.js"),require("../../stores/projectStores.js")),s=(require("../../weapp/utils/projectManager.js"),require("../../stores/windowStores.js")),i=e.createClass({displayName:"CustomPreview",getInitialState:function(){return{lazyLoaded:!1,show:!1,title:"",path:"",query:"",cacheKey:""}},_showCustomPreview:function(e){var t=e.project,a=t.widgetOptions||{},s=a.path,i=a.title,n=a.cacheKey,r=a.enable;this.setState({lazyLoaded:!0,project:t,show:!0,title:i,path:s||"",cacheKey:n||"",enable:r})},handleInputChange:function(e){var t=e.target.name;this.setState(_defineProperty({},t,e.target.value))},changeEnable:function(){this.setState({enable:!this.state.enable})},close:function(){this.setState({show:!1,title:"",path:"",query:"",cacheKey:"",enable:!1})},confirm:function(){var e=this.state,t=e.path,s=e.cacheKey,i=e.project,n=(e.enable,e.title);a.setWidgetOptions(i.hash,{title:n,path:t,cacheKey:s,enable:!0}),this.setState({show:!1})},componentDidMount:function(){s.on("SHOW_WIDGET_CUSTOM",this._showCustomPreview)},componentWillUnmount:function(){s.removeListener("SHOW_WIDGET_CUSTOM",this._showCustomPreview)},render:function(){if(!this.state.lazyLoaded)return null;var a=this.state.show?t.displayBlock:t.displayNone;return e.createElement("div",{className:"setting-show",style:a},e.createElement("div",{className:"setting-hd"},e.createElement("h3",{className:"setting-hd-title"},"动态页编译条件")),e.createElement("div",{className:"setting-bd"},e.createElement("div",{className:"custom-preview"},e.createElement("div",{className:"custom-preview-form"},e.createElement("div",{className:"custom-preview-form-item"},e.createElement("div",{className:"custom-preview-form-label"},"设置标题 ",e.createElement("span",null,"*必填")),e.createElement("div",{className:"custom-preview-form-value"},e.createElement("input",{type:"text",name:"title",value:this.state.title,onChange:this.handleInputChange,placeholder:"标题"}))),e.createElement("div",{className:"custom-preview-form-item"},e.createElement("div",{className:"custom-preview-form-label"},"设置页面路径及参数"),e.createElement("div",{className:"custom-preview-form-value"},e.createElement("input",{type:"text",name:"path",value:this.state.path,onChange:this.handleInputChange,placeholder:"页面路径及参数"}))),e.createElement("div",{className:"custom-preview-form-item"},e.createElement("div",{className:"custom-preview-form-label"},"设置 cacheKey"),e.createElement("div",{className:"custom-preview-form-value"},e.createElement("input",{type:"text",name:"cacheKey",value:this.state.cacheKey,onChange:this.handleInputChange,placeholder:"cacheKey"})))))),e.createElement("div",{className:"setting-ft"},e.createElement("a",{onClick:this.close,href:"javascript:;",className:"setting-button-default"},"取消"),e.createElement("a",{onClick:this.confirm,href:"javascript:;",className:"detail-meta-upload"},"确定")))}});_exports=i}var _exports;init(),module.exports=_exports;