"use strict";function init(){var n=require("../../lib/react"),i=(require("../../lib/react-dom"),n.createClass({displayName:"ExternalPopupWindow",componentDidMount:function(){this._onMessage=this.onMessage.bind(this),window.addEventListener("message",this._onMessage),this.openWindow(this.props.url)},componentDidUpdate:function(n,i){n.url!==this.props.url&&this.child&&(this.child.window.location.href=n.url)},componentWillUnmount:function(){if(this.unmounted=!0,this.child)try{this.closeWindow()}catch(n){}window.removeEventListener("message",this._onMessage)},openWindow:function(n){var i=this;nw.Window.open(n,this.getWindowOptions(),function(n){return i.unmounted?void n.close(!0):(i.child=n,n.on("close",function(){if(i.props.onWindowClose)try{i.props.onWindowClose(n)}catch(n){}i.closeWindow()}),void(i.props.onWindowOpen&&i.props.onWindowOpen(n)))})},closeWindow:function(){this.child&&(this.child.close(!0),this.child=null)},getWindowOptions:function(){function n(n){var i={},o=!0,t=!1,e=void 0;try{for(var s,r=n[Symbol.iterator]();!(o=(s=r.next()).done);o=!0){var a=s.value;this.props.hasOwnProperty(a)&&(i[a]=this.props[a])}}catch(n){t=!0,e=n}finally{try{!o&&r.return&&r.return()}finally{if(t)throw e}}return i}var i=["id","title","icon","position","always_on_top","width","height","min_width","min_height","max_width","max_height","resizable","kiosk","fullscreen","show_in_taskbar","frame","transparent"];return n.bind(this)(i)},onMessage:function(n){this.props.onMessage&&this.props.onMessage(n)},render:function(){return n.createElement("div",{style:{display:"none"}})}}));_exports=i}var _exports;init(),module.exports=_exports;