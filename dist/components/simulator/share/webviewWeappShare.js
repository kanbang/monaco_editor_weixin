"use strict";function init(){var e=require("../../../lib/react.js"),a=require("../../../cssStr/cssStr.js"),s=(require("../../../stores/webviewStores.js"),require("../../../actions/leftviewActions.js"),require("../../../stores/leftviewStores.js"),require("path"),require("../../../weapp/utils/tools.js")),t=e.createClass({displayName:"WebviewShare",getInitialState:function(){var e=s.getBaseURL(this.props.project);return{baseUrl:e,lazyLoaded:!1}},componentDidMount:function(){},componentWillUnmount:function(){},componentWillReceiveProps:function(e){e.shareInfo&&e.shareInfo.show&&this.setState({lazyLoaded:!0})},handleCancel:function(){this.props.shareInfo.callback({errMsg:"shareAppMessage:cancel"}),this.props.hideShare()},handleConfirm:function(){var e=this.props.shareInfo,a={errMsg:"shareAppMessage:ok"},s=e.shareBtnState;s.withShareTicket&&(a.shareInfos=[{shareKey:e.group.share_key,shareName:e.group.share_name}]),e.callback(a),this.props.hideShare()},render:function(){if(!this.state.lazyLoaded)return null;var s=this.props.shareInfo,t=s.imageUrl;return t?0!=t.indexOf("https://")&&0!=t.indexOf("http://")&&(t=this.state.baseUrl+t):t=s.dataURI,e.createElement("div",{className:"simulator-bd-share",style:s.show?{}:a.displayNone},e.createElement("div",{className:"simulator-bd-share-mask"}),e.createElement("div",{className:"simulator-bd-share-dialog weapp"},e.createElement("div",{className:"simulator-bd-share-dialog-hd"},e.createElement("strong",{className:"simulator-bd-share-dialog-title"},s.title)),e.createElement("div",{className:"simulator-bd-share-dialog-bd"},e.createElement("p",{className:"simulator-bd-share-dialog-desc"},s.desc),e.createElement("div",{className:"simulator-bd-share-dialog-cover"},e.createElement("img",{src:t,style:{objectPosition:"0% 0%"}}))),e.createElement("div",{className:"simulator-bd-share-dialog-ft"},e.createElement("a",{onClick:this.handleCancel,href:"javascript:;",className:"simulator-bd-share-dialog-button-default"},"取消"),e.createElement("a",{onClick:this.handleConfirm,href:"javascript:;",className:"simulator-bd-share-dialog-button-primary"},"确定"))))}});_exports=t}var _exports;init(),module.exports=_exports;