"use strict";function init(){var e=require("../../../lib/react.js"),t=(require("../../../lib/react-dom.js"),require("../../../stores/webviewStores.js")),r=require("../../../actions/webviewActions.js"),i=require("./pickerRing.js"),n=e.createClass({displayName:"MultiPicker",getInitialState:function(){return{array:[],current:[],hidden:!0,lazyLoaded:!1}},componentDidMount:function(){t.on("SET_INTERFACE_ASYNC_RES",this._handleWebviewsdkCommand)},componentWillUnmount:function(){t.removeListener("SET_INTERFACE_ASYNC_RES",this._handleWebviewsdkCommand)},_handleWebviewsdkCommand:function(e,t,i,n){var a=n.args;if("showMultiPickerView"===t)this.setState({array:a.array,current:a.current,lazyLoaded:!0,hidden:!1});else if("updateMultiPickerView"===t){var s=this.state,c=s.array,o=s.current,l=a.column||0;c[l]=a.array,o[l]=a.current,this.setState({array:c,current:o,lazyLoaded:!0}),r.sendJSSDKRes(e,t,{errMsg:t+":ok"})}},hide:function(){this.setState({hidden:!0,array:[],current:[]}),r.sendJSSDKRes(this.props.webviewID,"showMultiPickerView",{errMsg:"showMultiPickerView}:cancel"})},confirm:function(){r.sendJSSDKRes(this.props.webviewID,"showMultiPickerView",{errMsg:"showMultiPickerView:ok",current:this.state.current}),this.setState({hidden:!0,array:[],current:[]})},onPickerSelect:function(e,t){var i=this.state.current;i[e]=parseInt(t),this.setState({current:i}),r.triggerWebviewOnEvent({eventName:"onMultiPickerViewChange",data:{column:e,current:t}})},render:function(){var t=this;if(!this.state.lazyLoaded)return null;var r=this.state.array.map(function(r,n){return e.createElement(i,{array:r,current:t.state.current[n],onPickerSelect:t.onPickerSelect.bind(t,n)})});return e.createElement("div",{style:{display:this.state.hidden?"none":""}},e.createElement("div",{className:"wx-picker-mask",onClick:this.hide}),e.createElement("div",{className:"wx-picker"},e.createElement("div",{className:"wx-picker-hd"},e.createElement("a",{className:"wx-picker-action",onClick:this.hide},"取消"),e.createElement("a",{className:"wx-picker-action",onClick:this.confirm},"确定")),e.createElement("div",{className:"wx-picker-bd"},r)))}});_exports=n}var _exports;init(),module.exports=_exports;