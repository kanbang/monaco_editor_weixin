"use strict";function init(){var e=require("../../../lib/react.js"),t=require("../../../cssStr/cssStr.js"),o=(require("../../../stores/webviewStores.js"),require("../../../stores/windowStores.js")),i=require("../../../actions/windowActions.js"),s=require("../../../stores/projectStores.js"),r=require("../../../config/compileTypeConfig.js"),a="compiletype",n={weapp:"小程序",widget:"动态页",search:"搜索页"},l=e.createClass({displayName:"CompileType",getInitialState:function(){var e=this.props.project;return{isProject:!!e,show:!1,compileType:e?e.compileType:r.weapp}},handleOnClick:function(e){e.stopPropagation(),this.setState({show:!this.state.show}),i.clickToolsbar(a)},_clickToolsbar:function(e){a!=e&&this.setState({show:!1})},componentDidMount:function(){o.on("CLICK_TOOLSBAR",this._clickToolsbar),o.on("BODY_CLICK",this._clickToolsbar)},componentWillUnmount:function(){o.removeListener("CLICK_TOOLSBAR",this._clickToolsbar),o.removeListener("BODY_CLICK",this._clickToolsbar)},onClickItem:function(e){e.stopPropagation();var t=e.currentTarget,o=t.dataset,a=o.type;if(s.changeCompileType(a),a==r.search){var n=s.getCurrentProject();n.widgetOptions&&n.widgetOptions.searchQuery||i.showSearchWidgetCustom({project:n})}this.setState({show:!1,compileType:a})},render:function(){if(!this.state.isProject)return null;if(!global.appConfig.isBeta)return null;var o=this.state.show?{}:t.displayNone,i=this.state.show?"simulator-toolbar-model-icon-up":"simulator-toolbar-model-icon-down",s=[];for(var r in n){var a=n[r],l="simulator-toolbar-model-content-item";r===this.state.compileType&&(l+=" simulator-toolbar-model-content-item-current"),s.push(e.createElement("div",{onClick:this.onClickItem,className:l,"data-type":r},e.createElement("p",null,a)))}var c=n[this.state.compileType]||"小程序";return e.createElement("div",{className:"simulator-toolbar-model",onClick:this.handleOnClick},e.createElement("p",null,c),e.createElement("i",{className:i}),e.createElement("div",{className:"simulator-toolbar-model-content",style:o},s))}});_exports=l}var _exports;init(),module.exports=_exports;