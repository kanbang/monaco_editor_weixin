"use strict";function init(){var e=require("../../../lib/react.js"),t=require("../../../cssStr/cssStr.js"),s=require("../../../stores/projectStores.js"),i=require("../../../stores/webviewStores.js"),a=e.createClass({displayName:"GroupList",getInitialState:function(){var e=s.getCurrentProjectConfig();return{lazyLoaded:!1,groupList:e.groupList||[]}},componentDidMount:function(){i.on("SHOW_SHARE_GROUP_LIST",this._onShow),s.on("PROJECT_CONFIG_REFRESHED",this._onConfigRefreshed)},componentWillUnmount:function(){s.removeListener("PROJECT_CONFIG_REFRESHED",this._onConfigRefreshed),i.removeListener("SHOW_SHARE_GROUP_LIST",this._onShow)},_onShow:function(e){var t=this;return this._callback=e,0!=this.state.groupList.length&&this.props.shareBtnState&&this.props.shareBtnState.withShareTicket?void this.setState({show:!0,lazyLoaded:!0}):setTimeout(function(){t._callback?(t._callback({}),t._callback=null):t.props.onSelect&&t.props.onSelect({})},0)},_onConfigRefreshed:function(e){var t=e.groupList||[];this.setState({groupList:t})},handleGroupClick:function(e){var t=e.currentTarget.dataset,s=this.state.groupList[t.index];s&&(this._callback?(this._callback({}),this._callback=null):this.props.onSelect&&this.props.onSelect(s)),this.setState({show:!1})},hide:function(){this.setState({show:!1})},render:function(){var s=this;if(!this.state.lazyLoaded)return null;var i=this.state.show?{}:t.displayNone,a=this.state.groupList.map(function(t,i){return e.createElement("li",{className:"simulator-group-item","data-index":i,onClick:s.handleGroupClick},e.createElement("div",{className:"group-item-avatar"}),e.createElement("div",{className:"group-item-name"},t.room_topic))});return e.createElement("div",{style:i,className:"weui-grouplist-wrapper"},e.createElement("div",{className:"simulator-hd"},e.createElement("div",{className:"simulator-hd-back",onClick:this.hide},e.createElement("i",{className:"simulator-hd-back-icon"}),e.createElement("span",{style:{color:"white"}},"关闭")),e.createElement("h3",{className:"simulator-hd-title"},"发送给朋友"),e.createElement("div",{style:{width:70}})),e.createElement("ul",{className:"simulator-group-list"},a))}});_exports=a}var _exports;init(),module.exports=_exports;